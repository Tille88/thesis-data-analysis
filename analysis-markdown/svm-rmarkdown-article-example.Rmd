---
output: 
  pdf_document:
    citation_package: natbib
    # keep_tex: true
    fig_caption: true
    latex_engine: pdflatex
    number_sections: true  
header-includes:
  -  \usepackage{hyperref}
title: "Analysis output"
---


\newpage
\tableofcontents # adds table of contents
\newpage


```{r echo=FALSE}
library(mongolite)
library(stringr)
library(dplyr)
library(ggplot2)
# R studio wd same as source file
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
source("./../data_read_in.R")
responses_an = df_from_db()
responses_an$uuid = as.factor(responses_an$uuid)
responses_an$maptype = as.factor(responses_an$maptype)
responses_an$colour = as.factor(responses_an$colour)
responses_an$legend = as.factor(responses_an$legend)

```


# Summary Statistics
```{r, echo=FALSE, warning=FALSE, message=FALSE}
summary(responses_an)
```


# Plots response against legends

## PerceptionValueError
```{r, echo=FALSE}
# PerceptionValueError
p <- ggplot(responses_an, aes(legend, percept_error))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```

## ABS PerceptionValError
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(legend, percept_error_abs))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```



## TimeToSubmit
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(legend, submitTime))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```




## DecisionChanges
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(legend, inputChanges))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```


## Acceptance
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(legend, acceptance))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```


# Plots response against colour

## PerceptionValueError
```{r, echo=FALSE}
# PerceptionValueError
p <- ggplot(responses_an, aes(colour, percept_error))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```

## ABS PerceptionValError
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(colour, percept_error_abs))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```



## TimeToSubmit
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(colour, submitTime))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```




## DecisionChanges
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(colour, inputChanges))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```


## Acceptance
```{r, echo=FALSE}
p <- ggplot(responses_an, aes(colour , acceptance))
p + geom_violin() + geom_jitter(height = 0, width = 0.1, alpha=0.5)
```








